<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset=utf-8>
        <meta name="robots" content="noindex, nofollow">

        <title>Create a lobby | AxS</title>

        <link rel="shortcut icon" href="./resources/images/favicon.ico" type="image/x-icon" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" />
        <link href="./resources/css/style.css" rel="stylesheet" />
        <!-- <link rel="shortcut icon" type="image/png" href="./resources/favicon.png"/> -->
    </head>

    <body>
        <div class=container>
            <div class=sideBar>
                <div class=sb-header>
                    <div class=sb-header-img></div>
            
                    <div class=sb-header-text>
                        AxS calculator
                        <hr />
                        <a href="./settings.html" class="btn btn-sb-menu btn-xs" title="Settings"><i class="fas fa-cogs"></i></a> 
                    </div>
                </div>
            
                <div class=sb-navigation>
                    <a href="./index.html" class="sb-nav-column"><i class="fas fa-info"></i> Information</a>
                    <a href="./lobbyoverview.html" class="sb-nav-column"><i class="fas fa-bars"></i> Lobby overview</a>
                    <a href="./createlobby.html" class="sb-nav-column in"><i class="far fa-plus-square"></i> Create a lobby</a>
                    <a href="./modifiers.html" class="sb-nav-column"><i class="far fa-times-circle"></i> Modifiers</a>
                </div>
            </div>

            <div class=mainContent>
                <div class=form-group>
                    <h2>Match description</h2>
                    <p>This will only be a description about the match so you can distinguish them from other matches.</p>
                    <input id=matchDescription type=text class=form-control placeholder="Match description" />
                </div>

                <hr />
                
                <div class=form-group>
                    <h2>Multiplayer link</h2>
                    <p>
                        Enter a multiplayer link in here for the match you want to calculate the scores off. <br /><br />
                        Accepted URL's: <br />
                        <ul>
                            <li>https://osu.ppy.sh/community/matches/46358686</li>
                        </ul>
                    </p>
                    <input id=multiplayerLink type=text class=form-control placeholder="Multiplayer link" />
                </div>

                <div class=row>
                    <div class=col-6>
                        <div class=form-group>
                            <h2>Team one name</h2>
                            <p>
                                Enter the name of the first team. This will be team <span class=red-text>red</span> and has slot 1, 2 and 3.
                            </p>
                            <input id=teamOneName type=text class=form-control placeholder="Team one name" />
                        </div>
                    </div>

                    <div class=col-6>
                        <div class=form-group>
                            <h2>Team two name</h2>
                            <p>
                                Enter the name of the second team. This will be team <span class=blue-text>red</span> and has slot 4, 5 and 6.
                            </p>
                            <input id=teamTwoName type=text class=form-control placeholder="Team two name" />
                        </div>
                    </div>
                </div>
                
                <hr />

                <input type=button id=createLobby class="btn btn-primary float-right" value="Create" />

                <div class=row>
                    <div class=col>
                        <div id=createLobbyAlert class="alert alert-success" style="display: none;">
                            <h2><i class="fas fa-check"></i> Success!</h2>

                            <p id=lobbyText></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="./resources/js/jquery-3.3.1.min.js"></script>
    <script src="./resources/js/bootstrap.min.js"></script>
    <script src="./resources/js/functions.js"></script>
    <script>if (window.module) module = window.module;</script>

    <script>
        const {ipcRenderer, remote} = require('electron');

        $(() => {
            $('#createLobby').on('click', () => {
                // Create a lobby with the filled in data
                ipcRenderer.send('createLobby', {
                    'match-description': $('#matchDescription').val(),
                    'match-url': $('#multiplayerLink').val(),
                    'team-one-name': $('#teamOneName').val(),
                    'team-two-name': $('#teamTwoName').val()
                });
            });

            // This will be called when the match has been created
            ipcRenderer.on('matchHasBeenCreated', function(event, arg) {
                $('#createLobbyAlert').css('display', 'block');
                $('#lobbyText').html(`The match has been succesfully created. <a href="./lobbyview.html?id=${arg}">Click here to go to the lobby</a>.`);
            });
        });
    </script>
</html>